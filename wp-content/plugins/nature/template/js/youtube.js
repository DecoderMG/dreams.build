/*
* www.pooyaa.com
* Copyright (c) 2014 medhati;
*/
function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}typeof ytp!="object"&&(ytp={}),function(jQuery,ytp){var nAgt,nameOffset,verOffset,ix,start,end;ytp.isDevice="ontouchstart"in window,jQuery.browser||(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.msie=!1,nAgt=navigator.userAgent,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,end=start+4,jQuery.browser.fullVersion=nAgt.substring(start,end)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName)),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion),jQuery.fn.CSSAnimate=function(n,t,i,r,u){return this.each(function(){var f=jQuery(this),c,o,h,s,e;if(0!==f.length&&n){if("function"==typeof t&&(u=t,t=jQuery.fx.speeds._default),"function"==typeof i&&(u=i,i=0),"function"==typeof r&&(u=r,r="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof t)for(c in jQuery.fx.speeds)if(t==c){t=jQuery.fx.speeds[c];break}else t=null;if(jQuery.support.transition){o="",h="transitionEnd",jQuery.browser.webkit?(o="-webkit-",h="webkitTransitionEnd"):jQuery.browser.mozilla?(o="-moz-",h="transitionend"):jQuery.browser.opera?(o="-o-",h="otransitionend"):jQuery.browser.msie&&(o="-ms-",h="msTransitionEnd"),c=[];for(e in n)s=e,"transform"===s&&(s=o+"transform",n[s]=n[e],delete n[e]),"transform-origin"===s&&(s=o+"transform-origin",n[s]=n[e],delete n[e]),c.push(s),f.css(s)||f.css(s,0);e=c.join(","),f.css(o+"transition-property",e),f.css(o+"transition-duration",t+"ms"),f.css(o+"transition-delay",i+"ms"),f.css(o+"transition-timing-function",r),f.css(o+"backface-visibility","hidden"),setTimeout(function(){f.css(n)},0),setTimeout(function(){f.called||!u?f.called=!1:u()},t+20);f.on(h,function(n){return f.off(h),f.css(o+"transition",""),n.stopPropagation(),"function"==typeof u&&(f.called=!0,u()),!1})}else{for(e in n)"transform"===e&&delete n[e],"transform-origin"===e&&delete n[e],"auto"===n[e]&&delete n[e];u&&"string"!=typeof u||(u="linear"),f.animate(n,t,u)}}})},jQuery.fn.CSSAnimateStop=function(){var n="",t="transitionEnd";jQuery.browser.webkit?(n="-webkit-",t="webkitTransitionEnd"):jQuery.browser.mozilla?(n="-moz-",t="transitionend"):jQuery.browser.opera?(n="-o-",t="otransitionend"):jQuery.browser.msie&&(n="-ms-",t="msTransitionEnd"),jQuery(this).css(n+"transition",""),jQuery(this).off(t)},jQuery.support.transition=function(){var n=(document.body||document.documentElement).style;return void 0!==n.transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition}(),function(c){c.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(n,t){this.defaults.type=n,this.defaults.name=t},get:function(b,f){var d=c.extend({},this.defaults,f),a,e;if(d.single.length||(d.single="metadata"),a=c.data(b,d.single),a)return a;if(a="{}","class"==d.type)e=d.cre.exec(b.className),e&&(a=e[1]);else if("elem"==d.type){if(!b.getElementsByTagName)return;e=b.getElementsByTagName(d.name),e.length&&(a=c.trim(e[0].innerHTML))}else void 0!=b.getAttribute&&(e=b.getAttribute(d.name))&&(a=e);return 0>a.indexOf("{")&&(a="{"+a+"}"),a=eval("("+a+")"),c.data(b,d.single,a),a}}}),c.fn.metadata=function(n){return c.metadata.get(this[0],n)}}(jQuery),String.prototype.getVideoID=function(){var n;return n=this.substr(0,16)=="http://youtu.be/"?this.replace("http://youtu.be/",""):this.indexOf("http")>-1?this.match(/[\\?&]v=([^&#]*)/)[1]:this},jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"2.6.0",author:"Matteo Bicocchi",defaults:{containment:"body",ratio:"16/9",showYTLogo:!1,videoURL:null,startAt:0,autoPlay:!0,vol:100,addRaster:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,printUrl:!0,stopMovieOnClick:!1,realfullscreen:!0,onReady:function(){},onStateChange:function(){},onPlaybackQualityChange:function(){},onError:function(){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},rasterImg:"images/raster.png",rasterImgRetina:"images/raster@2x.png",locationProtocol:location.protocol!="file:"?location.protocol:"http:",buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer),property,canGoFullscreen,playerID,videoID,playerBox,overlay,retina,wrapper,tag,firstScriptTag;YTPlayer.loop=0,YTPlayer.opt={},property={},$YTPlayer.addClass("mb_YTVPlayer"),jQuery.metadata&&(jQuery.metadata.setType("class"),property=$YTPlayer.metadata()),jQuery.isEmptyObject(property)&&(property=$YTPlayer.data("property")&&typeof $YTPlayer.data("property")=="string"?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property")),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),canGoFullscreen=!(jQuery.browser.msie||jQuery.browser.opera||self.location.href!=top.location.href),canGoFullscreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","id_"+ +new Date),YTPlayer.opt.id=YTPlayer.id,YTPlayer.isAlone=!1,YTPlayer.opt.isBgndMovie&&(YTPlayer.opt.containment="body"),YTPlayer.opt.isBgndMovie&&YTPlayer.opt.isBgndMovie.mute!=undefined&&(YTPlayer.opt.mute=YTPlayer.opt.isBgndMovie.mute),YTPlayer.opt.videoURL||(YTPlayer.opt.videoURL=$YTPlayer.attr("href")),playerID="mbYTP_"+YTPlayer.id,videoID=this.opt.videoURL?this.opt.videoURL.getVideoID():$YTPlayer.attr("href")?$YTPlayer.attr("href").getVideoID():!1,YTPlayer.videoID=videoID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={autoplay:0,modestbranding:1,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations},canPlayHTML5=!1,v=document.createElement("video");if(v.canPlayType&&(canPlayHTML5=!0),canPlayHTML5&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1),playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay"),YTPlayer.opt.containment=YTPlayer.opt.containment=="self"?jQuery(this):jQuery(YTPlayer.opt.containment),YTPlayer.isBackground=YTPlayer.opt.containment.get(0).tagName.toLowerCase()=="body",ytp.isDevice&&YTPlayer.isBackground){$YTPlayer.hide();return}if(YTPlayer.opt.addRaster?(retina=window.retina||window.devicePixelRatio>1,overlay.addClass(retina?"raster retina":"raster")):overlay.removeClass("raster retina"),wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID),wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden",opacity:this.opt.opacity}),wrapper.append(playerBox),!YTPlayer.isBackground||!ytp.isInit){if(YTPlayer.opt.containment.children().each(function(){jQuery(this).css("position")=="static"&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({position:"relative",minWidth:"100%",minHeight:"100%",zIndex:1,boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide(),YTPlayer.opt.containment.prepend(wrapper)):YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),ytp.isDevice||(playerBox.after(overlay),YTPlayer.overlay=overlay),!YTPlayer.isBackground)overlay.on("mouseenter",function(){$YTPlayer.find(".mb_YTVPBar").addClass("visible")}).on("mouseleave",function(){$YTPlayer.find(".mb_YTVPBar").removeClass("visible")});ytp.YTAPIReady?setTimeout(function(){jQuery(document).trigger("YTAPIReady")},200):(tag=document.createElement("script"),tag.src=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api",tag.id="YTAPI",firstScriptTag=document.getElementsByTagName("script")[0],firstScriptTag.parentNode.insertBefore(tag,firstScriptTag));jQuery(document).on("YTAPIReady",function(){if((!YTPlayer.isBackground||!ytp.isInit)&&!YTPlayer.opt.isInit){if(YTPlayer.isBackground&&YTPlayer.opt.stopMovieOnClick)jQuery(document).off("mousedown.ytplayer").on("mousedown,.ytplayer",function(n){var t=jQuery(n.target);(t.is("a")||t.parents().is("a"))&&$YTPlayer.pauseYTP()});YTPlayer.isBackground&&(ytp.isInit=!0),YTPlayer.opt.isInit=!0,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromFeed(YTPlayer.videoID,YTPlayer);jQuery(document).on("getVideoInfo_"+YTPlayer.opt.id,function(){if(ytp.isDevice&&!YTPlayer.isBackground){new YT.Player(playerID,{height:"100%",width:"100%",videoId:YTPlayer.videoID,events:{onReady:function(){$YTPlayer.optimizeDisplay(),playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1}),$YTPlayer.optimizeDisplay()},onStateChange:function(){}}});return}new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(n){if(YTPlayer.player=n.target,!YTPlayer.isReady){YTPlayer.isReady=!0,YTPlayer.playerEl=YTPlayer.player.getIframe(),$YTPlayer.optimizeDisplay(),YTPlayer.videoID=videoID;jQuery(window).on("resize.YTP",function(){$YTPlayer.optimizeDisplay()});if(YTPlayer.opt.showControls&&jQuery(YTPlayer).buildYTPControls(),YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.startAt>0&&YTPlayer.player.seekTo(parseFloat(YTPlayer.opt.startAt),!0),YTPlayer.opt.autoPlay?($YTPlayer.playYTP(),YTPlayer.player.setVolume(YTPlayer.opt.vol),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume()):(YTPlayer.player.pauseVideo(),YTPlayer.checkForStartAt=setInterval(function(){YTPlayer.player.getCurrentTime()>=YTPlayer.opt.startAt&&(clearInterval(YTPlayer.checkForStartAt),YTPlayer.opt.mute?jQuery(YTPlayer).muteYTPVolume():jQuery(YTPlayer).unmuteYTPVolume())},1)),typeof YTPlayer.opt.onReady=="function")YTPlayer.opt.onReady($YTPlayer);jQuery.mbYTPlayer.checkForState(YTPlayer)}},onStateChange:function(n){var t,u;if(typeof n.target.getPlayerState=="function"){if(t=n.target.getPlayerState(),typeof YTPlayer.opt.onStateChange=="function")YTPlayer.opt.onStateChange($YTPlayer,t);var f=jQuery(YTPlayer.playerEl),i=jQuery("#controlBar_"+YTPlayer.id),r=YTPlayer.opt;if(t==0){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.player.pauseVideo(),u=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1,r.loop?(YTPlayer.wrapper.css({opacity:0}),$YTPlayer.playYTP(),YTPlayer.player.seekTo(u,!0)):YTPlayer.isBackground||(YTPlayer.player.seekTo(u,!0),$YTPlayer.playYTP(),setTimeout(function(){$YTPlayer.pauseYTP()},10)),!r.loop&&YTPlayer.isBackground?YTPlayer.wrapper.CSSAnimate({opacity:0},2e3):r.loop&&(YTPlayer.wrapper.css({opacity:0}),YTPlayer.loop++),i.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPEnd")}if(t==3){if(YTPlayer.state==t)return;YTPlayer.state=t,i.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPBuffering")}if(t==-1){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.wrapper.css({opacity:0}),jQuery(YTPlayer).trigger("YTPUnstarted")}if(t==1){if(YTPlayer.state==t)return;YTPlayer.state=t,YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),YTPlayer.opt.mute&&($YTPlayer.muteYTPVolume(),YTPlayer.opt.mute=!1),YTPlayer.opt.autoPlay&&YTPlayer.loop==0?YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity},2e3):YTPlayer.isBackground?setTimeout(function(){jQuery(YTPlayer.playerEl).CSSAnimate({opacity:1},2e3),YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},2e3)},1e3):(YTPlayer.wrapper.css({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity}),$YTPlayer.css({background:"rgba(0,0,0,0.5)"})),i.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.pause),jQuery(YTPlayer).trigger("YTPStart"),typeof _gaq!="undefined"&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.title||YTPlayer.videoID.toString()])}if(t==2){if(YTPlayer.state==t)return;YTPlayer.state=t,i.find(".mb_YTVPPlaypause").html(jQuery.mbYTPlayer.controls.play),jQuery(YTPlayer).trigger("YTPPause")}}},onPlaybackQualityChange:function(){if(typeof YTPlayer.opt.onPlaybackQualityChange=="function")YTPlayer.opt.onPlaybackQualityChange($YTPlayer)},onError:function(n){if(n.data==2&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),typeof YTPlayer.opt.onError=="function")YTPlayer.opt.onError($YTPlayer,n)}}})})}})}})},getDataFromFeed:function(n,t){t.videoID=n,jQuery.browser.msie?(t.opt.ratio=="auto"?t.opt.ratio="16/9":t.opt.ratio,t.isInit||(t.isInit=!0,setTimeout(function(){jQuery(document).trigger("getVideoInfo_"+t.opt.id)},100)),jQuery(t).trigger("YTPChanged")):(jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+n+"?v=2&alt=jsonc",function(n){var u,f;t.dataReceived=!0,u=n.data,t.title=u.title,t.videoData=u,t.opt.ratio=="auto"&&(t.opt.ratio=u.aspectRatio&&u.aspectRatio==="widescreen"?"16/9":"4/3"),t.isInit||(t.isInit=!0,t.isBackground||(f=t.videoData.thumbnail.hqDefault,jQuery(t).css({background:"rgba(0,0,0,0.5) url("+f+") center center",backgroundSize:"cover"})),jQuery(document).trigger("getVideoInfo_"+t.opt.id)),jQuery(t).trigger("YTPChanged")}),setTimeout(function(){t.dataReceived||t.isInit||(t.isInit=!0,jQuery(document).trigger("getVideoInfo_"+t.opt.id))},2500))},getVideoID:function(){var n=this.get(0);return n.videoID||!1},setVideoQuality:function(n){var t=this.get(0);t.player.setPlaybackQuality(n)},YTPlaylist:function(n,t,i){var r=this.get(0);if(r.isPlayList=!0,t&&(n=jQuery.shuffle(n)),r.videoID||(r.videos=n,r.videoCounter=0,r.videoLength=n.length,jQuery(r).data("property",n[0]),jQuery(r).mb_YTPlayer()),typeof i=="function")jQuery(r).on("YTPChanged",function(){i(r)});jQuery(r).on("YTPEnd",function(){jQuery(r).playNext()})},playNext:function(){var n=this.get(0);n.videoCounter++,n.videoCounter>=n.videoLength&&(n.videoCounter=0),jQuery(n.playerEl).css({opacity:0}),jQuery(n).changeMovie(n.videos[n.videoCounter])},playPrev:function(){var n=this.get(0);n.videoCounter--,n.videoCounter<=0&&(n.videoCounter=n.videoLength),jQuery(n.playerEl).css({opacity:0}),jQuery(n).changeMovie(n.videos[n.videoCounter])},changeMovie:function(n){var t=this.get(0),i=t.opt,r,u;n&&jQuery.extend(i,n),t.videoID=i.videoURL.getVideoID(),jQuery(t).pauseYTP(),r=jQuery.browser.msie?1e3:0,jQuery(t).getPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+t.videoID),5,t.opt.quality),setTimeout(function(){jQuery(t).playYTP();jQuery(t).one("YTPStart",function(){jQuery(t.playerEl).CSSAnimate({opacity:1},2e3)})},r),t.opt.mute?jQuery(t).muteYTPVolume():jQuery(t).unmuteYTPVolume(),t.opt.addRaster?(u=window.retina||window.devicePixelRatio>1,t.overlay.addClass(u?"raster retina":"raster")):(t.overlay.removeClass("raster"),t.overlay.removeClass("retina")),jQuery("#controlBar_"+t.id).remove(),t.opt.showControls&&jQuery(t).buildYTPControls(),jQuery.mbYTPlayer.getDataFromFeed(t.videoID,t),jQuery(t).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(t)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var n=this.get(0),t;ytp.YTAPIReady=!1,ytp.isInit=!1,n.opt.isInit=!1,n.videoID=null,t=n.wrapper,t.remove(),jQuery("#controlBar_"+n.id).remove()},fullscreen:function(n){function i(n,t){for(var r=["webkit","moz","ms","o",""],u=0,i,f;u<r.length&&!n[i];){if(i=t,r[u]==""&&(i=i.substr(0,1).toLowerCase()+i.substr(1)),i=r[u]+i,f=typeof n[i],f!="undefined")return r=[r[u]],f=="function"?n[i]():n[i];u++}}function o(n){i(n,"RequestFullScreen")}function s(){(i(document,"FullScreen")||i(document,"IsFullScreen"))&&i(document,"CancelFullScreen")}var t=this.get(0),r=jQuery("#controlBar_"+t.id),f=r.find(".mb_OnlyYT"),u=jQuery(t.wrapper),e;if(n){e=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange",jQuery(document).off(e);jQuery(document).on(e,function(){var n=i(document,"IsFullScreen")||i(document,"FullScreen");n?jQuery(t).setVideoQuality("default"):(jQuery(t).removeClass("fullscreen"),t.isAlone=!1,f.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(t).setVideoQuality(t.opt.quality),t.isBackground?jQuery("body").after(r):t.wrapper.before(r),jQuery(window).resize())})}t.isAlone?(n?s():u.CSSAnimate({opacity:t.opt.opacity},500),jQuery(t).trigger("YTPFullScreenEnd"),u.css({zIndex:-1}),f.html(jQuery.mbYTPlayer.controls.onlyYT),t.isAlone=!1):(t.player.getPlayerState()!=1&&t.player.getPlayerState()!=2&&jQuery(t).playYTP(),n?(t.wrapper.append(r),jQuery(t).addClass("fullscreen"),o(u.get(0))):u.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3,0),jQuery(t).trigger("YTPFullScreenStart"),f.html(jQuery.mbYTPlayer.controls.showSite),t.isAlone=!0)},playYTP:function(){var n=this.get(0),t=jQuery("#controlBar_"+n.id),i=t.find(".mb_YTVPPlaypause");i.html(jQuery.mbYTPlayer.controls.pause),n.player.playVideo(),n.wrapper.CSSAnimate({opacity:n.opt.opacity},2e3);jQuery(n).on("YTPStart",function(){jQuery(n).css("background","none")})},toggleLoops:function(){var t=this.get(0),n=t.opt;n.loop==1?n.loop=0:(n.startAt?t.player.seekTo(n.startAt):t.player.playVideo(),n.loop=1)},stopYTP:function(){var n=this.get(0),t=jQuery("#controlBar_"+n.id),i=t.find(".mb_YTVPPlaypause");i.html(jQuery.mbYTPlayer.controls.play),n.player.stopVideo()},pauseYTP:function(){var n=this.get(0),r=n.opt,t=jQuery("#controlBar_"+n.id),i=t.find(".mb_YTVPPlaypause");i.html(jQuery.mbYTPlayer.controls.play),n.player.pauseVideo()},seekToYTP:function(n){var t=this.get(0);t.player.seekTo(n,!0)},setYTPVolume:function(n){var t=this.get(0);n||t.opt.vol||player.getVolume()!=0?!n&&t.player.getVolume()>0||n&&t.player.getVolume()==n?jQuery(t).muteYTPVolume():t.opt.vol=n:jQuery(t).unmuteYTPVolume(),t.player.setVolume(t.opt.vol)},muteYTPVolume:function(){var n=this.get(0),t,i;n.opt.vol=n.player.getVolume()||50,n.player.mute(),n.player.setVolume(0),t=jQuery("#controlBar_"+n.id),i=t.find(".mb_YTVPMuteUnmute"),i.html(jQuery.mbYTPlayer.controls.unmute)},unmuteYTPVolume:function(){var n=this.get(0),t,i;n.player.unMute(),n.player.setVolume(n.opt.vol),t=jQuery("#controlBar_"+n.id),i=t.find(".mb_YTVPMuteUnmute"),i.html(jQuery.mbYTPlayer.controls.mute)},manageYTPProgress:function(){var n=this.get(0),t=jQuery("#controlBar_"+n.id),u=t.find(".mb_YTVPProgress"),f=t.find(".mb_YTVPLoaded"),e=t.find(".mb_YTVTime"),o=u.outerWidth(),i=Math.floor(n.player.getCurrentTime()),r=Math.floor(n.player.getDuration()),s=i*o/r,h=0,c=n.player.getVideoLoadedFraction()*100;return f.css({left:h,width:c+"%"}),e.css({left:0,width:s}),{totalTime:r,currentTime:i}},buildYTPControls:function(){var n=this.get(0),r=n.opt;if(!jQuery("#controlBar_"+n.id).length){var t=jQuery("<span/>").attr("id","controlBar_"+n.id).addClass("mb_YTVPBar").css({whiteSpace:"noWrap",position:n.isBackground?"fixed":"absolute",zIndex:n.isBackground?1e4:1e3}).hide(),u=jQuery("<div/>").addClass("buttonBar"),o=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTVPPlaypause ytpicon").click(function(){n.player.getPlayerState()==1?jQuery(n).pauseYTP():jQuery(n).playYTP()}),s=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTVPMuteUnmute ytpicon").click(function(){n.player.getVolume()==0?jQuery(n).unmuteYTPVolume():jQuery(n).muteYTPVolume()}),h=jQuery("<span/>").addClass("mb_YTVPTime"),f=r.videoURL;f.indexOf("http")<0&&(f=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+r.videoURL);var c=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTVPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(f,"viewOnYT")}),l=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(n).fullscreen(r.realfullscreen)}),e=jQuery("<div/>").addClass("mb_YTVPProgress").css("position","absolute").click(function(r){i.css({width:r.clientX-i.offset().left}),n.timeW=r.clientX-i.offset().left,t.find(".mb_YTVPLoaded").css({width:0});var u=Math.floor(n.player.getDuration());n.goto=i.outerWidth()*u/e.outerWidth(),n.player.seekTo(parseFloat(n.goto),!0),t.find(".mb_YTVPLoaded").css({width:0})}),a=jQuery("<div/>").addClass("mb_YTVPLoaded").css("position","absolute"),i=jQuery("<div/>").addClass("mb_YTVTime").css("position","absolute");e.append(a).append(i),u.append(o).append(s).append(h),r.printUrl&&u.append(c),(n.isBackground||n.opt.realfullscreen&&!n.isBackground)&&u.append(l),t.append(u).append(e),n.isBackground?jQuery("body").after(t):(t.addClass("inlinePlayer"),n.wrapper.before(t)),t.fadeIn()}},checkForState:function(n){var i=jQuery("#controlBar_"+n.id),r=n.opt,t=n.opt.startAt?n.opt.startAt:1;n.getState=setInterval(function(){var u=jQuery(n).manageYTPProgress();i.find(".mb_YTVPTime").html(jQuery.mbYTPlayer.formatTime(u.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(u.totalTime)),parseFloat(n.player.getDuration()-3)<n.player.getCurrentTime()&&n.player.getPlayerState()==1&&!n.isPlayList&&(r.loop?n.player.seekTo(t):(n.player.pauseVideo(),n.wrapper.CSSAnimate({opacity:0},2e3,function(){if(n.player.seekTo(t,!0),!n.isBackground){var i=n.videoData.thumbnail.hqDefault;jQuery(n).css({background:"rgba(0,0,0,0.5) url("+i+") center center",backgroundSize:"cover"})}})),jQuery(n).trigger("YTPEnd"))},1)},formatTime:function(n){var t=Math.floor(n/60),i=Math.floor(n-60*t);return(t<9?"0"+t:t)+" : "+(i<9?"0"+i:i)}},jQuery.fn.toggleVolume=function(){var n=this.get(0);if(n)return n.player.isMuted()?(jQuery(n).unmuteYTPVolume(),!0):(jQuery(n).muteYTPVolume(),!1)},jQuery.fn.optimizeDisplay=function(){var r=this.get(0),u=r.opt,e=jQuery(r.playerEl),t={},f=r.isBackground?jQuery(window):u.containment,i,n;t.width=f.width(),t.height=f.height(),i=24,n={},n.width=t.width+t.width*i/100,n.height=u.ratio=="16/9"?Math.ceil(9*t.width/16):Math.ceil(3*t.width/4),n.marginTop=-((n.height-t.height)/2),n.marginLeft=-(t.width*(i/2)/100),n.height<t.height&&(n.height=t.height+t.height*i/100,n.width=u.ratio=="16/9"?Math.floor(16*t.height/9):Math.floor(4*t.height/3),n.marginTop=-(t.height*(i/2)/100),n.marginLeft=-((n.width-t.width)/2)),e.css({width:n.width,height:n.height,marginTop:n.marginTop,marginLeft:n.marginLeft})},jQuery.shuffle=function(n){for(var t=n.slice(),u=t.length,i=u,r,f;i--;)r=parseInt(Math.random()*u),f=t[i],t[i]=t[r],t[r]=f;return t},jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.YTPlaylist,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildYTPControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.playYTP,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stopYTP,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pauseYTP,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekToYTP,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.muteYTPVolume,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmuteYTPVolume,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setYTPVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageYTPProgress}(jQuery,ytp);